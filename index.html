<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Guía del Curso de Administración de Servidores Linux</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
    <link rel="manifest" href="assets/manifest.json">
    <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    <style type="text/css">
        div.jumbotron {
            background-image: url('assets/linux-terminal.png');
            background-position: top;
            background-color: #333333;
        }
            .white {
                color: white !important;
            }
                footer {
                    background-color: #eee;
                }
                    footer div.container img {
                        display: block;
                        margin: 3vh auto;
                    }
                        p.foo {
                            font-size: 1.1em;
                        }
                        footer div.container-fluid {
                            background-color: #555555;
                        }
                            footer div.container-fluid p {
                                margin: .5%;
                            }
    </style>
</head>
<body>
    <div class="jumbotron">
        <div class="container">
            <h1 class="white">Guía del Curso de Administración de Servidores Linux</h1>
        </div>
    </div>

    <div class="container">
        <section>
            <h2>Introducción a Linux</h2>
            <p>A continuación se listarán y detallarán los comandos más esenciales a la hora de administrar servidores Linux.</p>
            <!-- Lista desordenada -->
            <ul>
                <li><strong>ifconfig:</strong> Permite ver las network interfaces</li>
                <li><strong>ifdown [network interface]:</strong> Desactiva dicha interface</li>
                <li><strong>ifup [network interface]:</strong> Activa dicha interface</li>
                <p>Los binarios se encuentran en: <strong>/sbin/if...</strong></p>
                <li><strong>ping [ip address]:</strong> Permite realizar ping a dicha IP</li>
                <li><strong>ssh [ip address] o ssh [username]@[ip address]:</strong> Permite conectarse por medio de SSH a un servidor (ubicado en dicha IP)</li>
                <li><strong>ssh-keygen -t rsa -b 4096 -C [your_email@example.com]:</strong> Permite generar una llave ssh tipo rsa</li>
                <li><strong>ssh-copy-id -i [ssh-key address].pub [username]@[ip address]:</strong> Envia una copia de la llave ssh "pública" a un servidor (ubicado en dicha IP)</li>
                <p>En el servidor se crea una carpeta en el home <strong>(.ssh/authorized_keys)</strong>; donde almacena la llave ssh "pública". </p>
                <li><strong>sudo vim /etc/ssh/sshd_config</strong>: En este archivo de configuración se debe editar la opción para que la única forma de conectarse al servidor sea por medio de ssh y no por medio de username y password.</li>
                <p>La opción a editar es: <strong>PasswordAuthentication [no]</strong>, colocar no; para evitar la autenticación por medio de username y password</p>
                <li><strong>sudo /etc/init.d/ssh restart</strong>: Reinicia el servicio ssh; y aplica los cambios</li>
            </ul>

            <p>A continuación se muestran los puertos más básicos (que debemos conocer) en <strong>Linux</strong>.</p>
            <!-- Lista desordenada -->
            <ul>
                <li><strong>FTP (File Transfer Protocol):</strong> Puerto 21</li>
                <li><strong>SSH (Secure Shell):</strong> Puerto 22</li>
                <li><strong>HTTP (HyperText Transfer Protocol):</strong> Puerto 80</li>
                <li><strong>SFTP (Secure File Transfer Protocol):</strong> Puerto 115</li>
                <li><strong>HTTPS/SSL (Secure HyperText Transfer Protocol/Secure Sockets Layer):</strong> Puerto 443</li>
            </ul>

            <p>
                Las llaves <strong>SSH</strong> son muy importante para un <strong>SysAdmin</strong>, ya que permiten conectarnos a un servidor y así poder ejecutar comandos de forma remota, de manera muy segura.
                Estas llaves se recomienda que sean almacenadas en el <strong>home</strong> en una carpeta llamada <strong>.ssh/</strong> y es importante asignarle un nombre al momento de generar una nueva para no sobrescribir una llave con otra.
            </p>

            <p>Una forma de evitar estar escribiendo <strong>[username]@[ip address]</strong> para acceder a un servidor es creando una configuración que nos haga automático el login y con un alias corto, es la siguiente:</p>
            <ul>
                <li><strong>vim .ssh/config:</strong> En este archivo se agregaran las instrucciones a seguir.</li>
            </ul>

            <p>Dentro del archivo de configuración es importante que se configure primordialmente así:</p>
            <pre>
                <strong>Host</strong> [alias]
                    <strong>HostName</strong> [ip address]
                    <strong>Port</strong> 22
                    <strong>User</strong> [username]
                    <strong>IdentityFile</strong> ~/.ssh/[ssh-keyname].pub</pre>

            <p><strong>VIM es un fork de VI</strong> y viene de manera predeterminada en muchos servidores, en caso de necesitar instalarlo basta con ejecutar (por ejemplo, en Debian/Ubuntu): <strong>apt-get install vim</strong>.</p>
            <!-- Lista desordenada -->
            <ul>
                <li><strong>Modo comandos <strong><kbd>ESC</kbd></strong>:</strong> Permite ejecutar comandos sin modificar el archivo</li>
                <p><strong><kbd>ESC</kbd></strong> Entra al modo comando sí se está en modo inserción</p>
                <li><strong>Modo inserción <strong><kbd>i</kbd></strong>:</strong> Permite insertar modificaciones al archivo</li>
                <p><strong><kbd>i</kbd></strong> Entra al modo inserción sí se está en modo comando</p>
                <li><strong>Modo visual <strong><kbd>v</kbd></strong>:</strong> Permite visualizar el archivo</li>
                <p><strong><kbd>v</kbd></strong> Entra al modo visual sí se está en modo comando</p>
                <li><strong><kbd>u</kbd></strong> Revierte los cambios de un archivo, es el <strong><kbd>CNTRL + Z</kbd></strong> de VIM</li>
                <li><strong>Guardar el archivo:</strong> Se realiza con el comando <strong><kbd>w</kbd></strong></li>
                <li><strong>Salir sin guardar:</strong> Se realiza con el comando <strong><kbd>q!</kbd></strong></li>
                <li><strong>Guardar y salir:</strong> Se realiza con el comando <strong><kbd>wq</kbd></strong></li>
            </ul>
        </section>

        <section>
            <h2>Instalación y configuración de programas</h2>
            <p>En la dirección <strong>/etc/apt/</strong> existe un archivo llamado <strong>source.list</strong> en el se guardan las fuentes de los repositorios que el sistema consultará al momento de instalar un paquete.</p>
            <!-- Lista desordenada -->
            <ul>
                <li><strong>apt-get:</strong> Este programa "es un manejador de paquetes" y nos permite instalar, desintalar y/o actualizar paquete</li>
                <p>Con <strong>install</strong> seguido del nombre de un paquete podemos instalar dicho paquete; para desintalar basta con usar <strong>remove</strong> seguido del paquete que queramos desintalar</p>
                <li><strong>dpkg -i [url-package].deb:</strong> Permite instalar paquete, por ejemplo los .deb</li>
                <li><strong>dpgk -P [name-package]:</strong> Elimina completamente el paquete incluyento sus datos, absolutamente todo.</li>
                <p>Desintalar los programas con <strong>dpkg -P</strong> no es una forma muy correcta de hacerlo ya este comando solo elimina el paquete que se le ordeno más no los programas que dependen de el, en cambio con <strong>apt-get remove</strong> se desintalan los paquetes de forma inteligente con todo y los programas dependientes a el.</p>
                <li><strong>aptitude:</strong> Este programa permite buscar, administrar e instalar paquetes en Linux de una forma más avanzada que con <strong>apt-get install</strong></li>
            </ul>

            <p>Al momento de hablar de <strong>"empaquetar"</strong> y <strong>"comprimir"</strong> se debe entender a primera instancia que son dos cosas totalmente distintas.</p>
            <!-- Lista desordenada -->
            <ul>
                <li><strong>Empaquetar:</strong> Tomar varios archivos y hacer de ellos uno solo.</li>
                <pre><strong>tar</strong> cvf [directorio de salida] [carpeta a empaquetar]</pre>
                <li><strong>Comprimir:</strong> Tomar un archivo y reducir su tamaño por medio de diferentes algoritmos (si quieres saber como funciona la compresión de un archivo dale click <a href="https://platzi.com/clases/ingenieria/concepto/archivos-y-estructuras-de-datos/como-funciona-zip-arboles-binarios/material/" target="_blank">aquí</a>) de esta forma se genera finalmente un archivo con un menor tamaño.</li>
                <pre><strong>gzip</strong> -9r [archivo a comprimir]</pre>
                <li>Para <strong>empaquetar</strong> y <strong>comprimir</strong> al mismo tiempo: Es importante conocer que la <strong>c</strong> requiere crear el archivo, la <strong>v</strong> solicita la información detallada y <strong>f</strong> toma un argumento que establece el nombre del archivo a operar. En esta caso la <strong>z</strong> se utiliza para comprimir.</li>
                <pre><strong>tar c</strong>vf<strong>z</strong> archivo.tar.gz [carpeta para comprimir]</pre>
                <li>Para <strong>desempaquetar</strong> y <strong>descomprimir</strong> al mismo tiempo: En este caso el parámetros que cambia (la <strong>c</strong> por la <strong>x</strong>) significa; "extraer un archivo".</li>
                <pre><strong>tar x</strong>vf<strong>z</strong> archivo.tar.gz</pre>
            </ul>

            <p>En cada distribución de <strong>Linux</strong> se encuentra un directorio donde esta toda la documentación de cada paquete instalado. En Ubuntu se encuentra en <strong>/usr/share/doc</strong>.</p>
        </section>

        <section>
            <h2>Administración de particiones y arranque</h2>
            <p>La arquitectura de <strong>Linux</strong> es una de las cosas más importante que debemos de entender de este sistema operativo. La arquitectura de archivos de <strong>Linux</strong> parte de su <strong>directorio raíz (/)</strong></p>
            <!-- Lista desordenada -->
            <ul>
                <li><strong>/</strong>: Raíz del sistema operativo.</li>
                <li><strong>/home</strong>: Directorio donde se almacenan los archivos de cada usuario.</li>
                <li><strong>/lib</strong>: Directorio donde se almacenan las librerías del sistema. Dependiendo de la arquitectura del sistema se puede encontrar <strong>lib32</strong> y <strong>lib64</strong>, estas hacen referencia a <strong>32 bits</strong> y <strong>64 bits</strong>.</li>
                <li><strong>/mnt</strong>: Directorio donde se montan los dispositivos que se insertan al computador, por ejemplo: memorias USB. También se usa <strong>/media</strong> con el mismo fin.</li>
                <li><strong>/opt</strong>: Directorio donde se almacenan los programas instalados de terceros.</li>
                <li><strong>/root</strong>: Directorio <strong>exclusivo</strong> donde se almacenan los archivos del <strong>super-usuario</strong> (o también conocido como <strong>root</strong> en los sistemas <strong>Linux</strong>)</li>
                <li><strong>/bin</strong>: Directorio donde se encuentran los binarios de los usuarios.</li>
                <li><strong>/sbin</strong>: Directorio donde se encuentran los binarios del administrador.</li>
                <p>Otro directorio donde se encuentran más binarios es <strong>/usr/bin/</strong>.</p>
                <li><strong>/tmp</strong>: Directorio donde se encuentran los archivos temporales del sistema.</li>
                <li><strong>/usr</strong>: Directorio donde se encuentran todos los programas instalados por defectos.</li>
                <li><strong>/var</strong>: Directorio donde se guardan todas las configuraciones de <strong>backups</strong>, <strong>cache de descarga</strong> del sistema, el <strong>servidor web</strong>, todos los <strong>logs</strong>, entre otras cosas.</li>
                <li><strong>/etc</strong>: Directorio donde se almacenan los archivos de configuración del sistema.</li>
                <li><strong>/boot</strong>: Directorio donde se almacenen todos los archivos necesarios para el arranque del sistema.</li>
            </ul>
            
            <p>Todos los discos duros tienen particiones. Las particiones permiten dividir un disco asignándole un espacio del disco a cada una de ellas.</p>
            <!-- Lista desordenada -->
            <ul>
                <li><strong>fdisk -l</strong>: Muestra los discos y las particiones que existen. A continuación se muestra que existen 2 discos duros (la práctica la hice en VirtualBox) y su respectivas particiones.</li>
                <pre>
                    <strong>Disk /dev/sda: 10 GiB, 10737418240 bytes, 20971520 sectors</strong>
                    Units: sectors of 1 * 512 = 512 bytes
                    Sector size (logical/physical): 512 bytes / 512 bytes
                    I/O size (minimum/optimal): 512 bytes / 512 bytes
                    Disklabel type: dos
                    Disk identifier: 0x83cdfcea

                    <strong>Device     Boot    Start      End  Sectors  Size Id Type</strong>
                    /dev/sda1  *        2048 19922943 19920896  9.5G 83 Linux
                    /dev/sda2       19924990 20969471  1044482  510M  5 Extended
                    /dev/sda5       19924992 20969471  1044480  510M 82 Linux swap / Solar


                    <strong>Disk /dev/sdb: 4 GiB, 4294967296 bytes, 8388608 sectors</strong>
                    Units: sectors of 1 * 512 = 512 bytes
                    Sector size (logical/physical): 512 bytes / 512 bytes
                    I/O size (minimum/optimal): 512 bytes / 512 bytes</pre>
                <li><strong>fdisk /dev/[disco duro]</strong>: Selecciona el disco duro en el cual se harán las particiones (en este caso en de 4GB).</li>
                <p><strong><kbd>m</kbd></strong> Con esta opción se listan los diferentes comandos del programa.</p>
                <p><strong><kbd>p</kbd></strong> Con esta opción se muestra la forma en el que se encuentra particionado el disco duro. En este caso no tiene nada.</p>
                <p><strong><kbd>n</kbd></strong> Esta opción permite crear una nueva partición en el disco. Al intentar crear una partición se le preguntará si será <strong><kbd>p</kbd> primary</strong> o <strong><kbd>e</kbd> extended</strong>. Para finalizar se le coloca el tamaño de la partición, por ejemplo, <strong><kbd>+1G</kbd></strong> en este caso.</p>
                <p><strong>Nota:</strong> Algo muy importante a tener en cuenta es que solo se pueden crear 4 particiones primarias y muchas lógicas (las particiones lógicas sirven como contenedor para más particiones).</p>
                <p><strong><kbd>q</kbd></strong> Esta opción permite salir sin guardar los cambios.</p>
                <p><strong><kbd>l</kbd></strong> Lista todos los tipos de particiones que existen. Para establecer alguna se debe usar su número de identificación.</p>
                <p><strong><kbd>t</kbd></strong> Esta opción permite cambiar el tipo de.</p>
                <p><strong><kbd>w</kbd></strong> Con esta opción se guardan los cambios y sale de <strong>fdisk</strong>.</p>
                <p><strong><kbd>w</kbd></strong> Esta opción permite eliminar particiones.</p>
            </ul>

            <p>Existen muchos tipos de sistemas de archivos, cada uno tiene características que lo hacen útil para diferentes dispositivos.</p>
            <!-- Lista desordenada -->
            <ul>
                <li><strong>Formato con FAT32:</strong> Ejecutando el comando <strong>mkfs.vfat /dev/[nombre de la partición]</strong> se le da un formato FAT32 a dicha partición.</li>
                <li><strong>Formato con EXT3:</strong> Ejecutando el comando <strong>mkfs.ext3 /dev/[nombre de la partición]</strong> se le da un formato EXT3 a dicha partición.</li>
                <li><strong>Formato con EXT4:</strong> Ejecutando el comando <strong>mkfs.ext4 /dev/[nombre de la partición]</strong> se le da un formato EXT4 a dicha partición.</li>
                <li><strong>Formato con XFS:</strong> Ejecutando el comando <strong>mkfs.xfs /dev/[nombre de la partición]</strong> se le da un formato XFS a dicha partición.</li>
            </ul>

            <p>Para <strong>montar una partición</strong> se debe crear un directorio por cada partición que se quiera montar.</p>
            <!-- Lista desordenada -->
            <ul>
                <li><strong>mkdir [nombre de la carpeta]:</strong> Crea un directorio</li>
                <li><strong>mount [nombre de la partición a montar] [nombre de la carpeta donde se montará la partición]:</strong> Monta una partición.</li>
                <li><strong>umount [nombre de la carpeta donde se encuentra montada la partición]:</strong> Desmonta una partición.</li>
                <li><strong><kbd>df -h</kbd></strong> Muestra los directorios de como se tiene montado el sistema.</li>
            </ul>
            <p>Para montar una partición de forma automática solo hay que editar un archivo en <strong>/etc/fstab</strong> y añadimos:</p>
            <pre><strong>/dev/[nombre de la partición]    /[carpeta donde se montará (punto de montaje)]    ext4    defaults,discard    0 0</strong></pre>
            <!-- Lista desordenada -->
            <ul>
                <li><strong>/dev/[nombre de la partición]:</strong> Se describe la partición a montar (con su número).</li>
                <li><strong>/[carpeta donde se montará]:</strong> Se describe el punto de montaje (es importante que lo creemos antes).</li>
                <li><strong>ext4:</strong> Se describe el formato de la partición con el cual se montará.</li>
                <li><strong>defaults,discard:</strong> Se describe si se cargará o no al inicio del sistema.</li>
                <p>Para terminar solo falta montarla <strong>/[carpeta que se usó para montar (punto de montaje)].</strong></p>
            </ul>
            <p>El area de intercambio o partición swap, es muy útil para máquinas que tienen muy poca memoria RAM.</p>
            <ul>
                <li><strong><kbd>free</kbd></strong> Este programa muestra el uso de la memoria RAM y la swap.</li>
                <li><strong><kbd>htop</kbd></strong> Este programa también muestra el uso del CPU, memoria RAM, la swap, entre otras cosas. Es programa es más completo y se debe instalar.</li>
            </ul>
        </section>
    </div>

    <!-- Pie de página -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-sm-8">
                    <h3 class="text-center">Acerca del autor</h3>
                    <p class="foo text-center">Hola, mi nombre es <strong>Joaquin Araujo</strong>, soy Venezolano, natal de la cálida y soleada ciudad de <strong>Maracaibo</strong>. Soy de los que apuesta por <strong>JavaScript</strong> porque sencillamente <strong>¡JavaScript se comió al mundo!</strong> Me enfoco más al área del backend (con <strong>Nodejs</strong>).</p>
                    <p class="foo text-center"><strong>No me limito a aprender cosas nuevas</strong> ya que siempre ando en constante aprendizaje. <strong>Me gusta compartir lo que aprendo</strong> es por ello que realicé esta guía.</p>
                    <p class="foo text-center">Si quieres comunicarte conmigo puedes hacerlo a través de mi cuenta en twitter <strong><a href="https://twitter.com/JoaquinAraujoJS" target="_blank">@JoaquinAraujoJS</a></strong>. Estoy abierto a cualquier proyecto <strong>¡con ganas de cambiar al mundo!</strong></p>
                </div>
                <div class="col-sm-4">
                    <img src="https://avatars0.githubusercontent.com/u/20958348?v=4&s=460" alt="Joaquin Araujo" class="img-rounded">
                </div>
            </div>
            <!-- Créditos a Platzi -->
        </div>
        <div class="container-fluid">
            <p class="text-center white">Esta guía fue realizada por <a href="https://twitter.com/JoaquinAraujoJS" target="_blank" class="white">Joaquin Araujo</a> y es un resumen del <a href="https://platzi.com/cursos/linux/" target="_blank" class="white">Curso de Administración de Servidores de Linux</a> de <a href="https://platzi.com" target="_blank" class="white">Platzi</a></p>
        </div>
    </footer>
</body>
</html>